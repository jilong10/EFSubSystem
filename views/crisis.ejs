<% include ./partials/header %>
<% include ./util/geturl %>

<h1>Crisis</h1>

<% data.forEach(crisis => { %>
<div class="table-responsive">
	<table class="table table-bordered">
		<thead>
		<tr class="table-active">
			<td>Crisis ID:</td>
			<td>Date: </td>
			<td>Last Update: </td>
			<td>Crisis Code:</td>
			<td>Casualty Size: </td>
		</tr>
		</thead>
		<tbody>
		<%if(crisis.crisisCode == "YELLOW"){%>
				<tr class="table-warning">
		<%}else if(crisis.crisisCode == "RED"){%>
				<tr class="table-danger">
		<%}else{%>
				<tr class="table-success">
		<%}%>
			<td><%= crisis.id %></td>
			<td><%= crisis.date %></td>
			<td><%= crisis.time %></td>
			<td><%= crisis.crisisCode %></td>
			<td><%= crisis.casualtySize %></td>
		</tr>
		</tbody>

	</table>
</div>

<h3>Update Crisis</h3>
<div class="container">
	<div class="row">
		<div class="col-6">
			<div class="form-group">
				<legend class="col-form-label">Crisis Code: </legend>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="crisis_code" id="crisis_code1" value="RED" >
					<label class="form-check-label" for="crisis_code1">
						RED
					</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="crisis_code" id="crisis_code2" value="YELLOW" >
					<label class="form-check-label" for="crisis_code2">
						YELLOW
					</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="crisis_code" id="crisis_code3" value="GREEN" >
					<label class="form-check-label" for="crisis_code3">
						GREEN
					</label>
				</div>
			</div>
		</div>
		<div class="col-6">
			<div class="form-group">
				<label for="casualty_size">Casualty Size: </label>
				<input type="number" class="form-control mb-3" id="casualty_size" value="<%= crisis.casualtySize %>">
			</div>
			<button onclick="updateCrisisStatus('<%= crisis.id %>')" class="btn btn-primary float-right">Update Crisis Status</button>
		</div>
	</div>
</div>

<h3>Enemies</h3>
<div class="table-responsive">
	<table class="table table-bordered">
		<thead>
		<tr class="table-active">
			<td>Enemy Name: </td>
			<td>Type: </td>
			<td>Size: </td>
			<td>Coordinates: </td>
			<td>Affected Area: </td>
		</tr>
		</thead>
		<tbody>
        <% crisis.Enemy.forEach(enemy => { %>
        <tr>
            <td><img src ="<%= getZombieImgUrl(enemy.enemyName)%>" /><%= enemy.enemyName %></td>
			<td class="align-middle"><%= enemy.enemyType %></td>
			<td class="align-middle"><%= enemy.enemySize %></td>
			<td class="align-middle">(<%= enemy.coordinateX %>, <%= enemy.coordinateY %>)</td>
			<td class="align-middle"><%= enemy.affectArea %></td>
		</tr>
        <%}); %>
		</tbody>
	</table>
</div>
<%}); %>

<% include ./partials/footer %>